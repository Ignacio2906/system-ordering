<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Inicio</title>
    <script>
      fetch('../mainhead.html')
        .then(res => res.text())
        .then(data => {
          document.head.innerHTML += data;
        });
    </script>
  </head>
  <body>
    <div id="navbar-placeholder"></div>

    <div class="container mt-5">
      <h1>Bienvenido a CHIFA CONTINENTAL</h1>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>

    <script type="module">
      const rol = localStorage.getItem("rol");

      fetch('../maintop.html')
        .then(res => res.text())
        .then(data => {
          document.getElementById('navbar-placeholder').innerHTML = data;

          const permisos = {
            "menu-cliente": ["admin", "mozo"],
            "menu-producto": ["admin"],
            "menu-pedido": ["admin", "mozo"],
            "menu-detalle": ["admin", "mozo", "cocinero"]
          };

          for (const [id, roles] of Object.entries(permisos)) {
            const el = document.getElementById(id);
            if (el && !roles.includes(rol)) {
              el.style.display = "none";
            }
          }
        });

      fetch('../mainbottom.html')
        .then(res => res.text())
        .then(data => {
          document.getElementById('footer-placeholder').innerHTML = data;
        });
    </script>
  </body>
</html>
